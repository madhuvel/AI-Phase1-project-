# -*- coding: utf-8 -*-
"""Untitled1.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1o7wjislGk10DngYdtASR_ab--GehZT2m
"""

from google.colab import drive
drive.mount('/content/drive')

# Access the dataset
import pandas as pd

# Assuming your file is in the 'My Drive' folder in Google Drive
path_to_file1 = '/content/drive/MyDrive/Fake.csv'
path_to_file2 = '/content/drive/MyDrive/True.csv'


# Load the dataset into a Pandas DataFrame
fake_data= pd.read_csv(path_to_file1)
true_data= pd.read_csv(path_to_file2)



print(fake_data.head())
print(true_data.head())
true_data['label1'] = 1
fake_data['label2'] = 0

merged_data = pd.concat([true_data,fake_data])
merged_data.head()

# Describe the dataset
merged_data.describe()

#data_info
merged_data.info()

# Check for null values in the dataset
null_values = merged_data.isnull().sum()

# Display the null values
print("Null values in the dataset:")
print(null_values)

merged_data['label2']

#To view the columns in the dataset
print("Columns in the dataset:")
print(merged_data.columns)

merged_data['fake/true'] = 0
merged_data.head()

from numpy import NaN
import pandas as pd
true=1
fake=0
no_value= NaN
for index, row in merged_data.iterrows():
  value1 = row['label1']
  value2 = row['label2']
  if value1== 1 and value2== NaN:
    merged_data.loc[index,fake/true] = 1
  if value2== 0 and value1== NaN:
    merged_data.loc[index,fake/true] = 0
merged_data.head()

# Describe the dataset
merged_data.describe()

# Check for null values in the dataset
null_values = merged_data.isnull().sum()

# Display the null values
print("Null values in the dataset:")
print(null_values)

column_name_to_remove = ['label1', 'label2','subject','title','date']
merged_data.drop(column_name_to_remove, axis=1, inplace=True)

#To view the columns in the dataset
print("Columns in the dataset:")
print(merged_data.columns)

from nltk.corpus import stopwords
from nltk.stem.porter import PorterStemmer
import re
port_stem=PorterStemmer()
port_stem

def stemming(content):
    con=re.sub('[^a-zA-Z]', ' ', content)
    con=con.lower()
    con=con.split()
    con=[port_stem.stem(word) for word in con if not word in stopwords.words('english')]
    con=' '.join(con)
    return con

import nltk
nltk.download('stopwords')
merged_data['text']= merged_data['text'].apply(stemming)

x=merged_data['text']

y=merged_data['fake/true']

y.shape

from sklearn.model_selection import train_test_split

x_train , x_test , y_train, y_test = train_test_split(x, y, test_size=0.20)

from sklearn.feature_extraction.text import TfidfVectorizer

vect=TfidfVectorizer()

x_train=vect.fit_transform(x_train)
x_test=vect.transform(x_test)

x_test.shape

from sklearn.tree import DecisionTreeClassifier

model=DecisionTreeClassifier()

model.fit(x_train, y_train)

prediction=model.predict(x_test)

prediction

model.score(x_test, y_test)

#importing pickel library
import pickle

pickle.dump(vect, open('vector.pkl', 'wb'))

pickle.dump(model, open('model.pkl', 'wb'))

vector_form=pickle.load(open('vector.pkl', 'rb'))

load_model=pickle.load(open('model.pkl', 'rb'))

def fake_news(news):
    news=stemming(news)
    input_data=[news]
    vector_form1=vector_form.transform(input_data)
    prediction = load_model.predict(vector_form1)
    return prediction

val=fake_news("""In these trying times, Jackie Mason is the Voice of Reason. [In this week’s exclusive clip for Breitbart News, Jackie discusses the looming threat of North Korea, and explains how President Donald Trump could win the support of the Hollywood left if the U. S. needs to strike first.  “If he decides to bomb them, the whole country will be behind him, because everybody will realize he had no choice and that was the only thing to do,” Jackie says. “Except the Hollywood left. They’ll get nauseous. ” “[Trump] could win the left over, they’ll fall in love with him in a minute. If he bombed them for a better reason,” Jackie explains. “Like if they have no transgender toilets. ” Jackie also says it’s no surprise that Hollywood celebrities didn’t support Trump’s strike on a Syrian airfield this month. “They were infuriated,” he says. “Because it might only save lives. That doesn’t mean anything to them. If it only saved the environment, or climate change! They’d be the happiest people in the world. ” Still, Jackie says he’s got nothing against Hollywood celebs. They’ve got a tough life in this country. Watch Jackie’s latest clip above.   Follow Daniel Nussbaum on Twitter: @dznussbaum """)
if val==[0]:
    print('reliable')
else:
    print('unreliable')
